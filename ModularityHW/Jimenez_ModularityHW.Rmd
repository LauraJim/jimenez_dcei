---
title: "Jimenez_ModularityHW"
author: "Laura Jiménez"
date: "March 2018"
output: html_document
#bibliography: ModularityHW_refs.bib
#csl: Science.csl
---

```{r setup, include=F}
knitr::opts_chunk$set(echo = F,include=F)
```

<!---```{r check, echo=F}
library(checkpoint)
checkpoint("2018-02-12")
```-->

```{r Funmtime}
mtime <- function(files)
{
  lapply(Sys.glob(files),function(x) {X = file.info(x)$mtime})
}
```

## Abstract

# Introduction
Use first research question as main idea:
1) Can we see climate warming for ourselves by analysing these data?

# Methods

## Data
-
```{r data, cache=T,cache.extra=list(mtime(c("USAAnnualTemp1950_2008.rds","USAAnnualPcpn1950_2008.rds"))}
# Check if you really need to use the mtime function or try to use cache.extra in a different way, see class March 6

# provided == T, if the data are stored in the same directory as .rds files, and ==F, if the data will be downloaded from a website
provided <- T
files <- c("USAAnnualTemp1950_2008.rds","USAAnnualPcpn1950_2008.rds")
if(provided==T)
{
  temp <- readRDS(files[1])
  prec <- readRDS(files[2])
}
str(temp)
str(prec)
#range(temp$year)
#range(prec$year)
```

## Models and R functions?

```{r cleaning}
# follow steps 1-3 in the HW guide
#aggregate(x=temp,by=list(temp$lat,temp$lon),FUN =mean,na.rm=T)
#aggregate(data~state,temp,length)

# Filtering data by weather station name and removing NA's
filter1 <- aggregate(data~name,temp,length,na.action = na.omit)
# Removing the weather stations with less than "minY" years of data
minY <- 40
filter2 <- subset(filter1,filter1$data >= minY)$name
filter3 <- subset(temp,subset=temp$name%in%filter2,selec=c(name,data,year))
cleandat <- aggregate(data~year,filter3,mean)
```

```{r mapData}
# showing the temp and prec trends in each location (maps package)
```

# Results
Answer the research questions:
2) In what parts of the country are temperatures getting warmer? Are there any parts that actually got colder over 1905-2010?
3) Can we say, based on these data, that a change in precipitation has occurred over this period?

# Discussion

# References